<!DOCTYPE html>
<html>
	{namespace formbuilder=TYPO3\FormBuilder\ViewHelpers}
	<head>
		<f:base />

		<script type="text/javascript">
			FORMBUILDER_CONFIGURATION = {formbuilder:jsonConfiguration()};
		</script>

		<f:for each="{javaScripts}" as="script">
			<f:for each="{script.files}" as="uri">
				<script src="{f:uri.resource(uri:uri)}"></script>
			</f:for>
		</f:for>

		<f:for each="{stylesheets}" as="stylesheet">
			<f:for each="{stylesheet.files}" as="uri">
				<link rel="stylesheet" href="{f:uri.resource(uri:uri)}"></script>
			</f:for>
		</f:for>

		{handlebarsTemplates -> f:format.raw()}
	</head>
	<body>
		<div id="app">
			<div id="header">
				<script type="text/x-handlebars">
					<h1>Form Builder &mdash; {{TYPO3.FormBuilder.Model.Form.formDefinition.identifier}}</h1>
					{{#if TYPO3.FormBuilder.Model.Form.currentlyLoadingPreview}}<span style="width: 60px;height:15px;background:red;position:absolute">Loading..</span>{{/if}}
					<span style="float:right">{{#view TYPO3.FormBuilder.SaveButton}}Save Changes{{/view}}</span>
				</script>
			</div>
			<div id="content">
				<div id="leftSidebar">
					<div id="leftSidebarInner">
						<script type="text/x-handlebars"><![CDATA[
							{{view TYPO3.FormBuilder.View.FormTree}}
						]]></script>

						<script type="text/x-handlebars"><![CDATA[
							{{view TYPO3.FormBuilder.View.AvailableFormElementsView}}
						]]></script>
					</div>
				</div>
				<div id="main">
					<script type="text/x-handlebars"><![CDATA[
						{{view TYPO3.FormBuilder.View.FormPageView}}
					]]></script>
				</div>
				<div id="rightSidebar">
					<div id="rightSidebarInner">
						<h2>Element Options</h2>
						<script type="text/x-handlebars"><![CDATA[
							{{view TYPO3.FormBuilder.View.FormElementInspector formElementBinding="TYPO3.FormBuilder.Model.Form.currentlySelectedRenderable"}}
						]]></script>
					</div>
				</div>
			</div>
			<div id="contextMenuContainer"></div>
		</div>

	</body>
</html>